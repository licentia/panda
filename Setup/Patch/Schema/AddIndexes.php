<?php

declare(strict_types=1);

namespace Licentia\Panda\Setup\Patch\Schema;

use Magento\Framework\Setup\SchemaSetupInterface;
use Magento\Framework\Setup\Patch\SchemaPatchInterface;

/**
 *
 */
class AddIndexes implements SchemaPatchInterface
{

    /**
     * @var SchemaSetupInterface
     */
    private $schemaSetup;

    /**
     * EnableSegmentation constructor.
     *
     * @param SchemaSetupInterface $schemaSetup
     */
    public function __construct(
        SchemaSetupInterface $schemaSetup
    ) {

        $this->schemaSetup = $schemaSetup;
    }

    /**
     * {@inheritdoc}
     */
    public function apply()
    {

        $indexes = [
            'panda_products_recommendations_age'     => [
                'related_1',
                'related_2',
                'related_3',
                'after_order_1',
            ],
            'panda_products_recommendations_country' => [
                'related_1',
                'related_2',
                'related_3',
                'after_order_1',
            ],
            'panda_products_recommendations_female'  => [
                'related_1',
                'related_2',
                'related_3',
                'after_order_1',
            ],
            'panda_products_recommendations_global'  => [
                'related_1',
                'related_2',
                'related_3',
                'after_order_1',
            ],
            'panda_products_recommendations_male'    => [
                'related_1',
                'related_2',
                'related_3',
                'after_order_1',
            ],
            'panda_products_recommendations_region'  => [
                'related_1',
                'related_2',
                'related_3',
                'after_order_1',
            ],
            'panda_products_relations_age'           => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_relations_attrs_age'     => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_relations_attrs_country' => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_relations_attrs_female'  => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_relations_attrs_global'  => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_relations_attrs_male'    => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_relations_attrs_region'  => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_relations_country'       => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_relations_female'        => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_relations_global'        => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_relations_male'          => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_relations_region'        => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_products_venn_age'                => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_products_venn_attrs_age'          => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_products_venn_attrs_country'      => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_products_venn_attrs_female'       => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_products_venn_attrs_global'       => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_products_venn_attrs_male'         => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_products_venn_attrs_region'       => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_products_venn_country'            => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_products_venn_female'             => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_products_venn_global'             => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_products_venn_male'               => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_products_venn_region'             => [
                'sku_1',
                'sku_2',
                'sku_3',
                'sku_4',
                'sku_5',
                'sku_6',
                'sku_7',
                'sku_8',
                'sku_9',
                'sku_10',
                'sku_11',
                'sku_12',
                'sku_13',
                'sku_14',
                'sku_15',
                'sku_16',
                'sku_17',
                'sku_18',
                'sku_19',
                'sku_20',
                'sku_21',
                'sku_22',
                'sku_23',
                'sku_24',
                'sku_25',
                'sku_26',
                'sku_27',
                'sku_38',
                'sku_29',
                'sku_30',
                'sku_31',
                'sku_32',
                'sku_33',
                'sku_34',
                'sku_35',
                'sku_36',
                'sku_37',
                'sku_38',
                'sku_39',
                'sku_40',
                'sku_41',
                'sku_42',
                'sku_43',
                'sku_44',
                'sku_45',
                'sku_46',
                'sku_47',
                'sku_48',
                'sku_49',
                'sku_50',
            ],
            'panda_search_relations_age'             => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_search_relations_country'         => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_search_relations_female'          => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_search_relations_global'          => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_search_relations_male'            => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_search_relations_region'          => [
                'related_1',
                'related_2',
                'related_3',
            ],
            'panda_search_venn_age'                  => [
                'query_1',
                'query_2',
                'query_3',
                'query_4',
                'query_5',
                'query_6',
                'query_7',
                'query_8',
                'query_9',
                'query_10',
                'query_11',
                'query_12',
                'query_13',
                'query_14',
                'query_15',
                'query_16',
                'query_17',
                'query_18',
                'query_19',
                'query_20',
                'query_21',
                'query_22',
                'query_23',
                'query_24',
                'query_25',
                'query_26',
                'query_27',
                'query_38',
                'query_29',
                'query_30',
                'query_31',
                'query_32',
                'query_33',
                'query_34',
                'query_35',
                'query_36',
                'query_37',
                'query_38',
                'query_39',
                'query_40',
                'query_41',
                'query_42',
                'query_43',
                'query_44',
                'query_45',
                'query_46',
                'query_47',
                'query_48',
                'query_49',
                'query_50',
            ],
            'panda_search_venn_country'              => [
                'query_1',
                'query_2',
                'query_3',
                'query_4',
                'query_5',
                'query_6',
                'query_7',
                'query_8',
                'query_9',
                'query_10',
                'query_11',
                'query_12',
                'query_13',
                'query_14',
                'query_15',
                'query_16',
                'query_17',
                'query_18',
                'query_19',
                'query_20',
                'query_21',
                'query_22',
                'query_23',
                'query_24',
                'query_25',
                'query_26',
                'query_27',
                'query_38',
                'query_29',
                'query_30',
                'query_31',
                'query_32',
                'query_33',
                'query_34',
                'query_35',
                'query_36',
                'query_37',
                'query_38',
                'query_39',
                'query_40',
                'query_41',
                'query_42',
                'query_43',
                'query_44',
                'query_45',
                'query_46',
                'query_47',
                'query_48',
                'query_49',
                'query_50',
            ],
            'panda_search_venn_female'               => [
                'query_1',
                'query_2',
                'query_3',
                'query_4',
                'query_5',
                'query_6',
                'query_7',
                'query_8',
                'query_9',
                'query_10',
                'query_11',
                'query_12',
                'query_13',
                'query_14',
                'query_15',
                'query_16',
                'query_17',
                'query_18',
                'query_19',
                'query_20',
                'query_21',
                'query_22',
                'query_23',
                'query_24',
                'query_25',
                'query_26',
                'query_27',
                'query_38',
                'query_29',
                'query_30',
                'query_31',
                'query_32',
                'query_33',
                'query_34',
                'query_35',
                'query_36',
                'query_37',
                'query_38',
                'query_39',
                'query_40',
                'query_41',
                'query_42',
                'query_43',
                'query_44',
                'query_45',
                'query_46',
                'query_47',
                'query_48',
                'query_49',
                'query_50',
            ],
            'panda_search_venn_global'               => [
                'query_1',
                'query_2',
                'query_3',
                'query_4',
                'query_5',
                'query_6',
                'query_7',
                'query_8',
                'query_9',
                'query_10',
                'query_11',
                'query_12',
                'query_13',
                'query_14',
                'query_15',
                'query_16',
                'query_17',
                'query_18',
                'query_19',
                'query_20',
                'query_21',
                'query_22',
                'query_23',
                'query_24',
                'query_25',
                'query_26',
                'query_27',
                'query_38',
                'query_29',
                'query_30',
                'query_31',
                'query_32',
                'query_33',
                'query_34',
                'query_35',
                'query_36',
                'query_37',
                'query_38',
                'query_39',
                'query_40',
                'query_41',
                'query_42',
                'query_43',
                'query_44',
                'query_45',
                'query_46',
                'query_47',
                'query_48',
                'query_49',
                'query_50',
            ],
            'panda_search_venn_male'                 => [
                'query_1',
                'query_2',
                'query_3',
                'query_4',
                'query_5',
                'query_6',
                'query_7',
                'query_8',
                'query_9',
                'query_10',
                'query_11',
                'query_12',
                'query_13',
                'query_14',
                'query_15',
                'query_16',
                'query_17',
                'query_18',
                'query_19',
                'query_20',
                'query_21',
                'query_22',
                'query_23',
                'query_24',
                'query_25',
                'query_26',
                'query_27',
                'query_38',
                'query_29',
                'query_30',
                'query_31',
                'query_32',
                'query_33',
                'query_34',
                'query_35',
                'query_36',
                'query_37',
                'query_38',
                'query_39',
                'query_40',
                'query_41',
                'query_42',
                'query_43',
                'query_44',
                'query_45',
                'query_46',
                'query_47',
                'query_48',
                'query_49',
                'query_50',
            ],
            'panda_search_venn_region'               => [
                'query_1',
                'query_2',
                'query_3',
                'query_4',
                'query_5',
                'query_6',
                'query_7',
                'query_8',
                'query_9',
                'query_10',
                'query_11',
                'query_12',
                'query_13',
                'query_14',
                'query_15',
                'query_16',
                'query_17',
                'query_18',
                'query_19',
                'query_20',
                'query_21',
                'query_22',
                'query_23',
                'query_24',
                'query_25',
                'query_26',
                'query_27',
                'query_38',
                'query_29',
                'query_30',
                'query_31',
                'query_32',
                'query_33',
                'query_34',
                'query_35',
                'query_36',
                'query_37',
                'query_38',
                'query_39',
                'query_40',
                'query_41',
                'query_42',
                'query_43',
                'query_44',
                'query_45',
                'query_46',
                'query_47',
                'query_48',
                'query_49',
                'query_50',
            ],
        ];

        $this->schemaSetup->startSetup();
        $setup = $this->schemaSetup;

        $connection = $setup->getConnection();

        foreach ($indexes as $table => $indexTable) {
            foreach ($indexTable as $index) {
                try {
                    $connection->query("ALTER TABLE " . $setup->getTable($table) . " ADD INDEX `" . strtoupper($table . '_' . $index) . "` ( `" . $index . "` (50)) ");
                } catch (\Exception $e) {
                }
            }
        }
        #ALTER TABLE `panda_new`.`panda_campaigns` ADD INDEX `PANDA_ID` (`message`(50)) comment '';
        $this->schemaSetup->endSetup();
    }

    /**
     * {@inheritdoc}
     */
    public static function getDependencies()
    {

        return [];
    }

    /**
     * {@inheritdoc}
     */
    public function getAliases()
    {

        return [];
    }
}
